services:
  openclaw:
    build: .
    image: openclaw:local
    container_name: openclaw-assistant
    ports:
      - "8001:18789"
    env_file:
      - .env
    environment:
      - NODE_ENV=production
      - OPENCLAW_CONFIG_PATH=/app/openclaw.json
      - OPENCLAW_STATE_DIR=/app
    volumes:
      # Mounting folder penting untuk persistensi data dan session
      - ./openclaw.json:/app/openclaw.json
      - ./workspace:/app/workspace
      - ./credentials:/app/credentials
      - ./agents:/app/agents
      - ./identity:/app/identity
      - ./logs:/app/logs
    restart: unless-stopped
    command: [ "node", "openclaw.mjs", "gateway", "--allow-unconfigured", "--bind", "lan", "--port", "18789" ]
